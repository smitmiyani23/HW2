[
  {
    "objectID": "HW2Obj_ctrflow_func.html",
    "href": "HW2Obj_ctrflow_func.html",
    "title": "ST558 HW2: Objects, Control Flow and Functions",
    "section": "",
    "text": "Document Details\n\nAuthor: Smit Miyani\n\n\nCollaborators: N/A\n\n\nAssignment: HW2\n\n\nDate: 26MAY24\n\n\nPurpose\nGeneral practice in working with vector, lists, dataframes, functions and control flow.\n\n\n\n\n\n\nTasks\n\nTask 1: Basic Vector Practice\nAssigning the pre treatment observations to pre_trt and post treatment observations to post_trt using c().\n\npre_trt &lt;- c(130, 128, 116, 124, 133, 134, 118, 126, 114, 127, 141, 138, 128, 140, 137, 131, 120, 128, 139, 135)\npost_trt &lt;- c(114, 98, 113, 99, 107, 116, 113, 111, 119, 117, 101, 119, 130, 122, 106, 106, 124, 102, 117, 113)\n\n#Structure of the assigned vector \"pre_trt\"\nstr(pre_trt)\n\n num [1:20] 130 128 116 124 133 134 118 126 114 127 ...\n\n\nBased on the structure of the assigned vectors, creating the name vector subj_names using sequential character string paste() function. Then assigning the subj_names as names of pre_trt and post_trt .\n\nsubj_names &lt;- paste(\"Subject\", 1:20, sep = \"_\")\nnames(pre_trt) &lt;- subj_names\nnames(post_trt) &lt;- subj_names\nhead(pre_trt)\n\nSubject_1 Subject_2 Subject_3 Subject_4 Subject_5 Subject_6 \n      130       128       116       124       133       134 \n\n\nDetermining the change in blood pressure by element-wise subtraction of post_trt from pre_trt and assigning it to delta_trt .\n\ndelta_trt &lt;- pre_trt - post_trt\nhead(delta_trt)\n\nSubject_1 Subject_2 Subject_3 Subject_4 Subject_5 Subject_6 \n       16        30         3        25        26        18 \n\n\nDetermining the mean decrease in blood pressure by averaging of delta_tr using mean() .\n\nmean(delta_trt)\n\n[1] 17\n\n\nSub-setting the delta_trt with positive observations only\n\ndelta_trt[delta_trt&gt;0]\n\n Subject_1  Subject_2  Subject_3  Subject_4  Subject_5  Subject_6  Subject_7 \n        16         30          3         25         26         18          5 \n Subject_8 Subject_10 Subject_11 Subject_12 Subject_14 Subject_15 Subject_16 \n        15         10         40         19         18         31         25 \nSubject_18 Subject_19 Subject_20 \n        26         22         22 \n\n\nDetermining the mean decrease in blood pressure for patrient that had a decreae by:\n\nSub-setting the delta_trt to return observations greater than 0.\nReturning the mean of sub-setted observation using mean() .\n\n\nmean(delta_trt[delta_trt&gt;0])\n\n[1] 20.64706\n\n\n\n\nTask 2: Basic Dataframe Practice\nRenaming vector as outlined in task and creating a dataframe bp_df using data.frame() .\n\npatient &lt;- subj_names\npre_bp &lt;- pre_trt\npost_bp &lt;- post_trt\ndiff_bp &lt;- delta_trt\n\nbp_df &lt;- data.frame(patient,pre_bp,post_bp,diff_bp, row.names = NULL)\nhead(bp_df)\n\n    patient pre_bp post_bp diff_bp\n1 Subject_1    130     114      16\n2 Subject_2    128      98      30\n3 Subject_3    116     113       3\n4 Subject_4    124      99      25\n5 Subject_5    133     107      26\n6 Subject_6    134     116      18\n\n\nReturning rows of bp_df with negative diff_bp observations using df[df$column &lt; 0,] .\n\nbp_df[bp_df$diff_bp &lt; 0,]\n\n      patient pre_bp post_bp diff_bp\n9   Subject_9    114     119      -5\n13 Subject_13    128     130      -2\n17 Subject_17    120     124      -4\n\n\nCreate a new column using df$new_column with a logical set to\n\nbp_df$low_bp &lt;- bp_df$post_bp &lt; 120\nhead(bp_df)\n\n    patient pre_bp post_bp diff_bp low_bp\n1 Subject_1    130     114      16   TRUE\n2 Subject_2    128      98      30   TRUE\n3 Subject_3    116     113       3   TRUE\n4 Subject_4    124      99      25   TRUE\n5 Subject_5    133     107      26   TRUE\n6 Subject_6    134     116      18   TRUE\n\n\nPlotting the object y with function plot() . Using the echo: false option to ensure only output is displayed when rendered.\n\nknitr::kable(bp_df)\n\n\n\n\npatient\npre_bp\npost_bp\ndiff_bp\nlow_bp\n\n\n\n\nSubject_1\n130\n114\n16\nTRUE\n\n\nSubject_2\n128\n98\n30\nTRUE\n\n\nSubject_3\n116\n113\n3\nTRUE\n\n\nSubject_4\n124\n99\n25\nTRUE\n\n\nSubject_5\n133\n107\n26\nTRUE\n\n\nSubject_6\n134\n116\n18\nTRUE\n\n\nSubject_7\n118\n113\n5\nTRUE\n\n\nSubject_8\n126\n111\n15\nTRUE\n\n\nSubject_9\n114\n119\n-5\nTRUE\n\n\nSubject_10\n127\n117\n10\nTRUE\n\n\nSubject_11\n141\n101\n40\nTRUE\n\n\nSubject_12\n138\n119\n19\nTRUE\n\n\nSubject_13\n128\n130\n-2\nFALSE\n\n\nSubject_14\n140\n122\n18\nFALSE\n\n\nSubject_15\n137\n106\n31\nTRUE\n\n\nSubject_16\n131\n106\n25\nTRUE\n\n\nSubject_17\n120\n124\n-4\nFALSE\n\n\nSubject_18\n128\n102\n26\nTRUE\n\n\nSubject_19\n139\n117\n22\nTRUE\n\n\nSubject_20\n135\n113\n22\nTRUE\n\n\n\n\n\n\n\nTask 3: List Practice\nAssigning pre-treatment and post-treatment observations to list pre_pb and post_pb lists.\n\npatient_pb = subj_names[1:10]\npre_pb &lt;- c(138, 135, 147, 117, 152, 134, 114, 121, 131, 130)\npost_pb &lt;- c(105, 136, 123, 130, 134, 143, 135, 139, 120, 124)\ndiff_pb &lt;- pre_pb - post_pb\n\nCreating a dataframe pb_df (similar to Task 2) with new placebo treatment data.\n\npb_df &lt;- data.frame(patient_pb,pre_pb,post_pb, diff_pb)\n\n#Renaming the columns to match bp_df\ncolnames(pb_df) &lt;- c(\"patient\",\"pre_bp\",\"post_bp\", \"diff_bp\")\npb_df$low_bp &lt;- pb_df$post_bp &lt; 120\nhead(pb_df)\n\n    patient pre_bp post_bp diff_bp low_bp\n1 Subject_1    138     105      33   TRUE\n2 Subject_2    135     136      -1  FALSE\n3 Subject_3    147     123      24  FALSE\n4 Subject_4    117     130     -13  FALSE\n5 Subject_5    152     134      18  FALSE\n6 Subject_6    134     143      -9  FALSE\n\n\nCreating a list experiment with pb_df and bp_df contained as elements, and renamed as placebo and treatment.\n\nexperiment = list(\"placebo\" = pb_df,\"treatment\" = bp_df)\n\nCalling the first element of experiment using different ways:\n\nexperiment[1]\n\n$placebo\n      patient pre_bp post_bp diff_bp low_bp\n1   Subject_1    138     105      33   TRUE\n2   Subject_2    135     136      -1  FALSE\n3   Subject_3    147     123      24  FALSE\n4   Subject_4    117     130     -13  FALSE\n5   Subject_5    152     134      18  FALSE\n6   Subject_6    134     143      -9  FALSE\n7   Subject_7    114     135     -21  FALSE\n8   Subject_8    121     139     -18  FALSE\n9   Subject_9    131     120      11  FALSE\n10 Subject_10    130     124       6  FALSE\n\n\n\nexperiment$placebo\n\n      patient pre_bp post_bp diff_bp low_bp\n1   Subject_1    138     105      33   TRUE\n2   Subject_2    135     136      -1  FALSE\n3   Subject_3    147     123      24  FALSE\n4   Subject_4    117     130     -13  FALSE\n5   Subject_5    152     134      18  FALSE\n6   Subject_6    134     143      -9  FALSE\n7   Subject_7    114     135     -21  FALSE\n8   Subject_8    121     139     -18  FALSE\n9   Subject_9    131     120      11  FALSE\n10 Subject_10    130     124       6  FALSE\n\n\n\nexperiment[\"placebo\"]\n\n$placebo\n      patient pre_bp post_bp diff_bp low_bp\n1   Subject_1    138     105      33   TRUE\n2   Subject_2    135     136      -1  FALSE\n3   Subject_3    147     123      24  FALSE\n4   Subject_4    117     130     -13  FALSE\n5   Subject_5    152     134      18  FALSE\n6   Subject_6    134     143      -9  FALSE\n7   Subject_7    114     135     -21  FALSE\n8   Subject_8    121     139     -18  FALSE\n9   Subject_9    131     120      11  FALSE\n10 Subject_10    130     124       6  FALSE\n\n\nAccessing pre_bp column from the experiment ’s first element placebo .\n\nexperiment$placebo$pre_bp\n\n [1] 138 135 147 117 152 134 114 121 131 130\n\n\n\n\nTask 4: Control Flow Practice\nCreating the status column in the placebo and tretament df in the experiment list.\n\nexperiment$placebo$status &lt;- character(10)\nexperiment$treatment$status &lt;- character(20)\nexperiment$placebo$status #Preview\n\n [1] \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\"\n\n\nWriting the values for status column in treatment by applying “if/else if/else” logic on experiment$treatment$post_bp observations and iterating over each element of experiment$treatment$status using “for” loop with column index.\n\nfor(i in seq(1:length(experiment$treatment$status))){\n  if (experiment$treatment$post_bp[i] &lt;= 120) {\n  experiment$treatment$status[i] = \"optimal\"  \n} else if (experiment$treatment$post_bp[i] &gt; 120 & experiment$treatment$post_bp[i] &lt;= 130) {\n  experiment$treatment$status[i] = \"borderline\"\n} else if (experiment$treatment$post_bp[i] &gt; 130) {\n  experiment$treatment$status[i] = \"high\"\n} else {\n  #if no conditions met\n  experiment$treatment$status[i] = \"ERROR\"\n}\n}\nhead(experiment$treatment)\n\n    patient pre_bp post_bp diff_bp low_bp  status\n1 Subject_1    130     114      16   TRUE optimal\n2 Subject_2    128      98      30   TRUE optimal\n3 Subject_3    116     113       3   TRUE optimal\n4 Subject_4    124      99      25   TRUE optimal\n5 Subject_5    133     107      26   TRUE optimal\n6 Subject_6    134     116      18   TRUE optimal\n\n\nSimilarly writing values for status in experiment$treatment$ .\n\nfor(i in seq(1:length(experiment$placebo$status))){\n  if (experiment$placebo$post_bp[i] &lt;= 120) {\n  experiment$placebo$status[i] = \"optimal\"  \n} else if (experiment$placebo$post_bp[i] &gt; 120 & experiment$placebo$post_bp[i] &lt;= 130) {\n  experiment$placebo$status[i] = \"borderline\"\n} else if (experiment$placebo$post_bp[i] &gt; 130) {\n  experiment$placebo$status[i] = \"high\"\n} else {\n  #if no conditions met\n  experiment$placebo$status[i] = \"ERROR\"\n}\n}\nhead(experiment$placebo)\n\n    patient pre_bp post_bp diff_bp low_bp     status\n1 Subject_1    138     105      33   TRUE    optimal\n2 Subject_2    135     136      -1  FALSE       high\n3 Subject_3    147     123      24  FALSE borderline\n4 Subject_4    117     130     -13  FALSE borderline\n5 Subject_5    152     134      18  FALSE       high\n6 Subject_6    134     143      -9  FALSE       high\n\n\n\n\nTask 5: Writing Functions\nCreating a function statasizer which takes in a list of two dataframes and a statistic function (as a string), and returns attributed vector of corresponding statistic.\n\nstatasizer &lt;- function(df_list,func = \"mean\") {\n  #Create a str for func to be added in name vector\n  func_str &lt;- toString(func)\n  \n  #assigning stat function to input string\n  func &lt;- get(func)\n  numeric_cols &lt;- c(\"pre_bp\", \"post_bp\", \"diff_bp\")\n  \n  stats_vec &lt;-c() #empty statistic vector\n  #Iterating df_list\n  for (df in df_list){\n    \n    #iterating over numeric column in the df_list\n    for (x in seq(1:length(numeric_cols))) {\n      \n      #applying the input statistic function and appending it to empty statistic vector\n      stats_vec &lt;- append(stats_vec,func(df[,numeric_cols[x]]))\n    }\n  }\n  #Creating a name vector by vectorizing and using paste() multiple times\n  \n  name_vec &lt;- paste(c(paste(numeric_cols,\"placebo\",sep = \"_\"),paste(numeric_cols,\"treatment\",sep = \"_\")),func_str,sep = \"_\")\n  \n  #assigning name vector to statistic vector\n  names(stats_vec) &lt;- name_vec\n  \n  return(stats_vec)\n  #code\n  #return something with return()\n  #or returns last value\n}\n\nApplying the function to experiment with:\n\nNo input function\n\nstatasizer(experiment)\n\n   pre_bp_placebo_mean   post_bp_placebo_mean   diff_bp_placebo_mean \n                131.90                 128.90                   3.00 \n pre_bp_treatment_mean post_bp_treatment_mean diff_bp_treatment_mean \n                129.35                 112.35                  17.00 \n\n\nWith “var”, “sd”, “min”, and “max”\n\nfor(fn in c(\"var\", \"sd\", \"min\",\"max\")){\n  print(statasizer(experiment,fn))\n}\n\n   pre_bp_placebo_var   post_bp_placebo_var   diff_bp_placebo_var \n            149.87778             124.98889             341.33333 \n pre_bp_treatment_var post_bp_treatment_var diff_bp_treatment_var \n             64.55526              74.76579             153.68421 \n   pre_bp_placebo_sd   post_bp_placebo_sd   diff_bp_placebo_sd \n           12.242458            11.179843            18.475209 \n pre_bp_treatment_sd post_bp_treatment_sd diff_bp_treatment_sd \n            8.034629             8.646721            12.396944 \n   pre_bp_placebo_min   post_bp_placebo_min   diff_bp_placebo_min \n                  114                   105                   -21 \n pre_bp_treatment_min post_bp_treatment_min diff_bp_treatment_min \n                  114                    98                    -5 \n   pre_bp_placebo_max   post_bp_placebo_max   diff_bp_placebo_max \n                  152                   143                    33 \n pre_bp_treatment_max post_bp_treatment_max diff_bp_treatment_max \n                  141                   130                    40"
  }
]